document.addEventListener('DOMContentLoaded', function () {
    var menuLinks = document.querySelectorAll('.list-menu-item > .list-menu-empty');
  
    menuLinks.forEach(function (link) {
      link.addEventListener('click', function (event) {
        event.preventDefault();
  
        var iconCaret = link.querySelector('.icon-caret');

        var listItem = link.closest('.list-menu-item');
  
        var submenu = listItem.querySelector('.list-submenu');
  
        var isOpen = submenu.hasAttribute('open');

        var allCaretIcons = document.querySelectorAll('.list-menu-item > .list-menu-empty .icon-caret.rotate-180')

        var allSubmenus = document.querySelectorAll('.list-submenu[open]');

        allSubmenus.forEach(function (otherSubmenu) {
          otherSubmenu.removeAttribute('open');
        });
  
        allCaretIcons.forEach(function (otherIcon){
            otherIcon.classList.remove('rotate-180');
        })

        if (!isOpen) {
          submenu.setAttribute('open', '');
          link.classList.add('submenu-open');
          iconCaret.classList.add('rotate-180')
        } else {
          submenu.removeAttribute('open');
          link.classList.remove('submenu-open');
          iconCaret.classList.remove('rotate-180');
        }
      });
    });
  });
  